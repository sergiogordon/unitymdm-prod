Hey Serg ‚Äî if you‚Äôre seeing the toast (‚ÄúLaunching app‚Ä¶‚Äù) but **Unity never opens**, that tells us something super specific:

‚û°Ô∏è **Your full-screen notification DID fire.**
‚û°Ô∏è **Your LauncherActivity DID launch.**
‚ùå **But Unity‚Äôs launch Intent is being blocked or ignored by the system.**

This narrows it down to **5 possible causes**, and I‚Äôll walk through each along with the fixes.

---

# 1. Your LauncherActivity is launching in the background (Android thinks it‚Äôs not foreground yet)

On some devices, `onResume()` fires **before** Android considers it foreground-focus, and immediately firing another Activity can get dropped.

## Fix: Add a short 50‚Äì150ms post-delay inside `onResume()`

```kotlin
override fun onResume() {
    super.onResume()

    Handler(Looper.getMainLooper()).postDelayed({
        launchUnity()
    }, 150)
}

private fun launchUnity() {
    val intent = packageManager.getLaunchIntentForPackage("com.unitynetwork.unityapp")
    intent?.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
    startActivity(intent)
    finish()
}
```

This solves the issue on Samsung, Motorola, Xiaomi, and Orbic devices where ‚ÄúActivity launch back-to-back‚Äù gets blocked.

---

# 2. Unity‚Äôs MainActivity is NOT exported (Android 12+ issue)

If the app‚Äôs manifest has:

```xml
android:exported="false"
```

Then **external activity launches fail silently**, even from Device Owner.

## How to confirm

Run:

```bash
adb shell dumpsys package com.unitynetwork.unityapp | grep exported
```

If `MAIN` is not exported, only the app itself can start it.

## Fix (if you can‚Äôt modify Unity)

Instead of `getLaunchIntentForPackage()`, send the **HOME** intent first, then launch:

```kotlin
val home = Intent(Intent.ACTION_MAIN).apply {
    addCategory(Intent.CATEGORY_HOME)
    addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
}
startActivity(home)

Handler(Looper.getMainLooper()).postDelayed({
    val launchIntent = packageManager.getLaunchIntentForPackage("com.unitynetwork.unityapp")
    launchIntent?.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
    startActivity(launchIntent)
    finish()
}, 200)
```

This ‚Äúresets focus state‚Äù and often works around unexported activity restrictions.

---

# 3. The PendingIntent flags are wrong (Android 12 tightened them)

If your PendingIntent lacks `FLAG_IMMUTABLE` or `FLAG_UPDATE_CURRENT`, Android may drop it.

## Use this instead:

```kotlin
val pendingIntent = PendingIntent.getActivity(
    context,
    0,
    fullScreenIntent,
    PendingIntent.FLAG_IMMUTABLE or PendingIntent.FLAG_UPDATE_CURRENT
)
```

This is required on Android 12+ for background-launch paths.

---

# 4. The notification channel is not registered as HIGH priority / full screen

On some OEMs, if the channel priority is not MAX, the full-screen intent will not truly foreground the launcher activity even though your toast fires.

## Fix

When creating the channel:

```kotlin
val channel = NotificationChannel(
    "restart_channel",
    "Restart Channel",
    NotificationManager.IMPORTANCE_HIGH // or IMPORTANCE_MAX on older APIs
)
channel.setSound(null, null)
channel.enableVibration(false)
notificationManager.createNotificationChannel(channel)
```

And the builder:

```kotlin
.setPriority(NotificationCompat.PRIORITY_HIGH)
.setFullScreenIntent(pendingIntent, true)
```

---

# 5. Your LauncherActivity must be exported + visible

If your activity isn‚Äôt exported, system UI can‚Äôt launch it from the notification.

In your manifest:

```xml
<activity
    android:name=".LauncherActivity"
    android:exported="true"
    android:theme="@style/Theme.Transparent">
</activity>
```

And fix your theme (this often breaks full-screen intents):

```xml
<style name="Theme.Transparent" parent="Theme.AppCompat.Light.NoActionBar">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:backgroundDimEnabled">false</item>
</style>
```

If the activity cannot visibly show, Android doesn‚Äôt treat it as foreground, so subsequent launches are blocked.

---

# üî• The most likely cause based on your symptom

Since you **see the toast**, that means LauncherActivity started.
But Unity didn‚Äôt start, which means:
‚û°Ô∏è LauncherActivity attempted to start Unity **too early** (before focus).
This is extremely common on cheap Android devices like Orbic.

Adding the 100‚Äì200ms post-delay inside onResume is the #1 fix.

---

# üôå Let me know, Serg

If you want, send me:

* Your LauncherActivity code
* Your manifest snippet for that activity
* Your notification builder code

I‚Äôll spot the issue instantly.

We‚Äôre very close.

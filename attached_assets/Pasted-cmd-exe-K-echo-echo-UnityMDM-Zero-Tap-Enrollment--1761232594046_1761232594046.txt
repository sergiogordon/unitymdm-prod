cmd.exe /K "echo ============================================ & echo UnityMDM Zero-Tap Enrollment - D23 & echo ============================================ & echo. & echo [Step 0/7] Check prerequisites... & where adb >nul 2>&1 && (echo ✅ ADB found & for /f ^"tokens=*^" %A in ('adb version 2^^^>nul ^^^| findstr Bridge') do @echo %A) || (echo ❌ ADB not found in PATH & echo Fix: Install Android Platform Tools & echo Download: https://developer.android.com/tools/releases/platform-tools) & echo Listing devices: & adb devices -l & echo. & echo [Step 1/7] Wait for device... & adb wait-for-device >nul 2>&1 && (echo ✅ Device connected) || (echo ❌ No device - Check USB cable & adb devices -l) & echo. & echo [Step 2/7] Download APK... & curl -L -H ^"X-Admin-Key: ldWh9geFGp2QbdRQQWvzGzwI56hb2FD4GdC48CKjT1Y=^" ^"https://83b071bb-c5cb-4eda-b79c-d276873904c2-00-2ha4ytvejclnm.worf.replit.dev/v1/apk/download-latest^" -o ^"%TEMP%\unitymdm.apk^" >nul 2>&1 && (echo ✅ APK downloaded) || (echo ❌ Download failed - Check network) & echo. & echo [Step 3/7] Install APK... & (adb install -r -g ^"%TEMP%\unitymdm.apk^" >nul 2>&1 || (adb uninstall com.nexmdm >nul 2>&1 & adb install -r -g -t ^"%TEMP%\unitymdm.apk^" >nul 2>&1)) && (echo ✅ APK installed) || (echo ❌ Install failed) & echo. & echo [Step 4/7] Set Device Owner... & adb shell dpm set-device-owner com.nexmdm/.NexDeviceAdminReceiver >nul 2>&1 && (echo ✅ Device Owner confirmed) || (echo ❌ Device Owner failed - Factory reset required) & echo. & echo [Step 5/7] Grant permissions... & adb shell pm grant com.nexmdm android.permission.POST_NOTIFICATIONS >nul 2>&1 & adb shell pm grant com.nexmdm android.permission.ACCESS_FINE_LOCATION >nul 2>&1 & adb shell pm grant com.nexmdm android.permission.CAMERA >nul 2>&1 & adb shell appops set com.nexmdm RUN_ANY_IN_BACKGROUND allow >nul 2>&1 & adb shell appops set com.nexmdm GET_USAGE_STATS allow >nul 2>&1 & adb shell dumpsys deviceidle whitelist +com.nexmdm >nul 2>&1 & echo ✅ Permissions granted & echo. & echo [Step 6/7] Launch and auto-enroll... & adb shell monkey -p com.nexmdm -c android.intent.category.LAUNCHER 1 >nul 2>&1 & timeout /t 2 /nobreak >nul & adb shell am broadcast -a com.nexmdm.CONFIGURE -n com.nexmdm/.ConfigReceiver --es server_url ^"https://83b071bb-c5cb-4eda-b79c-d276873904c2-00-2ha4ytvejclnm.worf.replit.dev^" --es admin_key ^"ldWh9geFGp2QbdRQQWvzGzwI56hb2FD4GdC48CKjT1Y=^" --es alias ^"D23^" >nul 2>&1 && (echo ✅ Auto-enrollment initiated) || (echo ❌ Broadcast failed) & echo. & echo [Step 7/7] Verify... & timeout /t 3 /nobreak >nul & adb shell pidof com.nexmdm >nul 2>&1 && (echo ✅ Service running) || (echo ❌ Service not running) & echo. & echo ============================================ & echo ✅ ENROLLMENT COMPLETE & echo ============================================ & echo Device: D23 & echo Check dashboard within 60 seconds & echo ============================================ & echo. & echo Window will stay open - Type 'exit' to close"